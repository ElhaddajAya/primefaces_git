<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>JSF PrimeFaces - Clients</title>
    <link rel="stylesheet" href="https://unpkg.com/primeflex@latest/primeflex.css" />
    <script type="text/javascript">
        function handleComplete() {
            location.reload(); // rafraîchit la page après la soumission réussie
        }
    </script>
</h:head>

<h:body style="background-color: #eee;">
    <h:form id="form">
        <p:growl id="msgs" showDetail="true" />

        <div class="card">
            <p:dataTable id="clientsTable" var="client"
                         value="#{clientView.clients}" editable="true"
                         style="margin-bottom:20px">

                <p:ajax event="rowEdit" listener="#{clientView.saveClient}" update=":form:msgs" />
                <p:ajax event="rowEditCancel" listener="#{clientView.deleteClient}" update=":form:msgs" />

                <p:column headerText="ID">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{client.id}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText id="idInput" value="#{client.id}" style="width:100%" disabled="true" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="First Name">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{client.firstName}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{client.firstName}" style="width:100%" label="First Name" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Last Name">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{client.lastName}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{client.lastName}" style="width:100%" label="Last Name" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="City">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{client.city}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{client.city}" style="width:100%" label="City" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Phone">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{client.phone}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{client.phone}" style="width:100%" label="Phone" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column headerText="Address">
                    <p:cellEditor>
                        <f:facet name="output">
                            <h:outputText value="#{client.address}" />
                        </f:facet>
                        <f:facet name="input">
                            <p:inputText value="#{client.address}" style="width:100%" label="Address" />
                        </f:facet>
                    </p:cellEditor>
                </p:column>

                <p:column style="width:6rem">
                    <p:rowEditor editTitle="Edit Row" cancelTitle="Cancel Edit" saveTitle="Save Row" />
                </p:column>

            </p:dataTable>
        </div>
    </h:form>
</h:body>
</html>
